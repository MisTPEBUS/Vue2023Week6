import{_ as a,o as u,c as h,a as e,i as m,g as l,v as d}from"./index-7c27bc6f.js";const p={data(){return{user:{username:"",password:""},isStoreAccount:!1}},methods:{login(){const r="https://vue3-course-api.hexschool.io/v2/admin/signin";this.axios.post(r,this.user).then(s=>{const{token:c,expired:n}=s.data;this.$cookies.set("token",c,{expires:n}),this.isStoreAccount?(this.$cookies.set("username",this.user.username,{expires:n}),this.$cookies.set("isStoreAccount",this.isStoreAccount,{expires:n})):(this.$cookies.remove("username"),this.$cookies.remove("isStoreAccount")),this.$router.push("/admin/products")}).catch(s=>{console.log(s),alert(s.response.data.message)})},goIndex(){this.$router.push("/")}},mounted(){document.body.classList.add("loginBody"),this.user.username=this.$cookies.get("username"),this.isStoreAccount=this.isStoreAccount!==void 0},beforeUnmount(){document.body.classList.remove("loginBody")}},_={class:"container mt-5"},f={class:"row justify-content-center"},g={class:"login"},x=e("div",{class:"login-triangle"},null,-1),b=e("h2",{class:"login-header"},"後台管理系統",-1),k={class:"form-floating mb-3 myTextField"},v=e("label",{for:"floatingInput"},"請輸入帳號",-1),y={class:"form-floating myTextField"},w=e("label",{for:"floatingPassword"},"請輸入密碼",-1),S={class:"form-check"},A=["checked"],C=e("label",{class:"form-check-label",for:"flexCheckChecked"}," 是否紀錄帳號 ",-1),B=e("button",{class:"btn btn-lg btn-login w-100 mt-3",type:"submit"}," 登入 ",-1),U=e("p",{class:"mt-5 mb-3 text-white"}," © 2023~∞ - 六角學院 ",-1);function $(r,s,c,n,o,i){return u(),h("div",_,[e("div",f,[e("div",g,[x,b,e("form",{class:"login-container",onSubmit:s[4]||(s[4]=m((...t)=>i.login&&i.login(...t),["prevent"]))},[e("div",k,[l(e("input",{type:"email",class:"form-control","onUpdate:modelValue":s[0]||(s[0]=t=>o.user.username=t),id:"floatingInput",placeholder:"ex: hello@example.com",required:"",autofocus:""},null,512),[[d,o.user.username]]),v]),e("div",y,[l(e("input",{type:"password",class:"form-control","onUpdate:modelValue":s[1]||(s[1]=t=>o.user.password=t),id:"floatingPassword",placeholder:"Password",required:""},null,512),[[d,o.user.password]]),w]),e("div",S,[e("input",{class:"form-check-input",type:"checkbox",id:"flexCheckChecked",checked:o.isStoreAccount,onChange:s[2]||(s[2]=t=>o.isStoreAccount=!o.isStoreAccount)},null,40,A),C]),e("button",{class:"btn btn-lg btn-index w-100 mt-3",type:"button",onClick:s[3]||(s[3]=t=>i.goIndex())}," 回首頁 "),B],32)])]),U])}const L=a(p,[["render",$]]);export{L as default};
